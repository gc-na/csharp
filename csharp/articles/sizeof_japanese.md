<!--
Meta Description: # C#における「sizeof」演算子の完全ガイド ## 概要 C#の「sizeof」演算子は、特定のデータ型のバイトサイズを取得するために使用されます。この演算子は、主に構造体や配列のサイズを計算する際に役立ちます。 ## ドキュメント ### 目的 「sizeof」演算子は、指定されたデータ型の...
Meta Keywords: sizeof, int, 演算子は, console, writeline
-->

# C#における「sizeof」演算子の完全ガイド

## 概要
C#の「sizeof」演算子は、特定のデータ型のバイトサイズを取得するために使用されます。この演算子は、主に構造体や配列のサイズを計算する際に役立ちます。

## ドキュメント
### 目的
「sizeof」演算子は、指定されたデータ型のメモリサイズ（バイト単位）を返します。主に、固定長のデータ構造を扱う際に、そのサイズを計算するために使用されます。

### 使用法
「sizeof」演算子は、以下のように使用します。

```csharp
int sizeOfInt = sizeof(int);
```

この例では、`sizeOfInt`には`int`型のサイズ（通常は4バイト）が格納されます。注意点として、「sizeof」はコンパイル時に評価されるため、実行時に計算する必要はありません。

### 詳細
- **データ型のサポート**: 「sizeof」は、プリミティブ型（int、char、floatなど）や、ユーザー定義の構造体に対して使用できます。ただし、クラス型には使用できません。
- **unsafeコード**: 構造体のサイズを取得する際、「unsafe」コンテキストで使用する必要があります。これには、プロジェクトの設定で「unsafeコードを許可」にする必要があります。
- **リファレンスタイプ**: リファレンスタイプ（クラスなど）には「sizeof」を使用できませんが、オブジェクトのサイズを取得するには他の方法（例: `Marshal.SizeOf`）を使用する必要があります。

## 例
以下は「sizeof」の基本的な使用例です。

```csharp
using System;

class Program
{
    static void Main()
    {
        Console.WriteLine("int型のサイズ: " + sizeof(int)); // 出力: 4
        Console.WriteLine("char型のサイズ: " + sizeof(char)); // 出力: 2
        Console.WriteLine("double型のサイズ: " + sizeof(double)); // 出力: 8
    }
}
```

## 説明
「sizeof」演算子を使用する際の一般的な落とし穴や注意点について説明します。

- **ユーザー定義構造体**: ユーザー定義の構造体に対しては「sizeof」を使用できますが、フィールドが他のクラス型を参照している場合、そのサイズは計算されません。
- **unsafeコンテキスト**: 「sizeof」を使用する場合、プロジェクトの設定で「unsafeコードを許可」にする必要があるため、適切な設定を行っていないとエラーになります。
- **パフォーマンス**: 「sizeof」はコンパイル時に評価されるため、実行時のパフォーマンスには影響を与えませんが、メモリ管理を考慮する必要があります。

## 一文要約
C#の「sizeof」演算子は、特定のデータ型のメモリサイズをコンパイル時に取得するための便利なツールです。